!function(p,s,i,t){s.wp=s.wp||{},s.wp.dev4press=s.wp.dev4press||{},s.wp.dev4press.admin={scroll_offset:40,active_element:null,init:function(){wp.dev4press.admin.components.scroller.run(),wp.dev4press.admin.components.interface.run(),wp.dev4press.admin.components.notices.run(),"settings"===d4plib_admin_data.page.panel&&wp.dev4press.admin.panels.settings.run(),"features"===d4plib_admin_data.page.panel&&wp.dev4press.admin.panels.features.run(),p(s).on("load resize orientationchange",function(){wp.dev4press.admin.components.scroller.resize()})},panels:{features:{run:function(){p(i).on("change",".d4p-feature-box ._activation input",function(){var t=p(this).is(":checked"),e=p(this).closest(".d4p-feature-box"),n=p(this).data("feature");t?e.addClass("_is-active"):e.removeClass("_is-active");var s="?action="+d4plib_admin_data.plugin.prefix+"_feature_activation&_ajax_nonce="+d4plib_admin_data.content.nonce,a={url:ajaxurl+s,type:"post",dataType:"json",data:{feature:n,status:t?"on":"off"}};p.ajax(a)}),p(i).on("click",".d4p-features-bulk-ctrl-options button",function(t){t.preventDefault(),"enable"===p(this).data("action")?p(".d4p-feature-box ._activation input").each(function(){p(this).is(":checked")||p(this).prop("checked",!0).trigger("change")}):p(".d4p-feature-box ._activation input").each(function(){p(this).is(":checked")&&p(this).prop("checked",!1).trigger("change")})}),p(i).on("click",".d4p-feature-more-ctrl",function(t){t.preventDefault(),p(this).hasClass("_is-open")?(p(this).removeClass("_is-open"),p(this).next().hide(),p(this).next().next().show()):(p(this).addClass("_is-open"),p(this).next().show(),p(this).next().next().hide())}),p(i).on("click",".d4p-features-bulk-ctrl",function(t){t.preventDefault(),p(this).hasClass("button-secondary")?(p(this).removeClass("button-secondary").addClass("button-primary"),p(this).next().hide()):(p(this).removeClass("button-primary").addClass("button-secondary"),p(this).next().show())})}},settings:{run:function(){wp.dev4press.admin.settings.init(),p("#"+d4plib_admin_data.plugin.prefix+"-form-settings").confirmsubmit(),1===p("#d4p-settings-mark").length&&wp.dev4press.admin.panels.settings.mark()},mark:function(){p(i).on("click",".d4p-panel-mark button",function(t){p("#d4p-settings-mark").val("").trigger("input")});var e=p(".d4p-group"),n=p(".d4p-group > h3"),s=p(".d4p-settings-section > h4"),a=p(".d4p-settings-table > tbody > tr");p("#d4p-settings-mark").on("input",function(){var t=p(this).val();e.show(),n.unmark(),s.show().unmark(),a.show().unmark(),t&&(a.mark(t,{done:function(){a.not(":has(mark)").hide()}}),s.mark(t,{done:function(){s.each(function(t,e){0<p(e).find("mark").length?p(e).parent().find(".d4p-settings-table > tbody > tr").show():p(e).hide()})}}),n.mark(t,{done:function(){n.each(function(t,e){0<p(e).find("mark").length&&p(e).parent().find(".d4p-settings-table > tbody > tr").show()})}}),n.each(function(t,e){var n=p(e).parent(),s=0;p(".d4p-settings-section",n).each(function(t,e){0<p(e).height()&&(s+=p(e).height())}),0===s&&n.hide()}))})}}},components:{scroller:{run:function(){var t=p(".d4p-panel-scroller"),e=p(s);if(0<t.length){var n=t.offset();e.scroll(function(){e.scrollTop()>n.top&&t.hasClass("d4p-scroll-active")?t.stop().animate({marginTop:e.scrollTop()-n.top+wp.dev4press.admin.scroll_offset}):t.stop().animate({marginTop:0})})}},resize:function(){i.body.clientWidth<800?wp.dev4press.admin.scroll_offset=60:wp.dev4press.admin.scroll_offset=40,i.body.clientWidth<640?p(".d4p-panel-scroller").removeClass("d4p-scroll-active").stop().css("margin-top",0):p(".d4p-panel-scroller").addClass("d4p-scroll-active")}},interface:{run:function(){p(i).on("click",".d4p-nav-button > a",function(t){t.preventDefault(),p(this).next().slideToggle("fast")}),0<p(".d4p-wrap .d4p-message .notice").length&&setTimeout(function(){p(".d4p-wrap .d4p-message .notice").slideUp("slow")},1e4)}},notices:{run:function(){p("#wpbody-content > div.notice").detach().prependTo(".d4p-wrap")}}},settings:{init:function(){wp.dev4press.admin.settings.color_picker.run(),wp.dev4press.admin.settings.expandables.run(),wp.dev4press.admin.settings.check_uncheck.run(),wp.dev4press.admin.settings.switch.run()},color_picker:{run:function(){0<p(".d4p-color-picker").length&&p(".d4p-color-picker").wpColorPicker()}},check_uncheck:{run:function(){p(i).on("click",".d4p-check-uncheck a",function(t){t.preventDefault();var e="checkall"===p(this).attr("href").substr(1);p(this).parent().parent().find("input[type=checkbox]").prop("checked",e)})}},expandables:{run:function(){p(i).on("click",".d4p-setting-expandable_pairs .button-secondary",function(t){t.preventDefault();var e=p(this).parent();e.fadeOut(200,function(){e.remove()})}),p(i).on("click",".d4p-setting-expandable_text .button-secondary",function(t){wp.dev4press.admin.settings.expandables.remove(this,t),wp.dev4press.admin.settings.expandables.remove(this,t)}),p(i).on("click",".d4p-setting-expandable_raw .button-secondary",function(t){wp.dev4press.admin.settings.expandables.remove(this,t)}),p(i).on("click",".d4p-setting-expandable_pairs a.button-primary",function(t){t.preventDefault();var e=p(this).closest(".d4p-setting-expandable_pairs"),n=p(".d4p-next-id",e),s=n.val(),a=p(".pair-element-0",e).clone();p("input",a).each(function(){var t=p(this).attr("id").replace("_0_","_"+s+"_"),e=p(this).attr("name").replace("[0]","["+s+"]");p(this).attr("id",t).attr("name",e)}),a.attr("class","pair-element-"+s).fadeIn(),p(this).before(a),s++,n.val(s)}),p(i).on("click",".d4p-setting-expandable_text a.button-primary",function(t){wp.dev4press.admin.settings.expandables.add(this,t,".d4p-setting-expandable_text")}),p(i).on("click",".d4p-setting-expandable_raw a.button-primary",function(t){wp.dev4press.admin.settings.expandables.add(this,t,".d4p-setting-expandable_raw")})},add:function(t,e,n){e.preventDefault();var s=p(t).closest(n),a=p(".d4p-next-id",s),i=a.val(),o=p(".exp-text-element-0",s).clone();p("input",o).each(function(){var t=p(this).attr("id").replace("_0_","_"+i+"_"),e=p(this).attr("name").replace("[0]","["+i+"]");p(this).attr("id",t).attr("name",e)}),o.attr("class","exp-text-element exp-text-element-"+i).fadeIn(),p("ol",s).append(o),i++,a.val(i)},remove:function(t,e){e.preventDefault();var n=p(t).parent();n.fadeOut(200,function(){n.remove()})}},switch:{run:function(){p(".d4p-switch-control-option select").change(function(){var t,e,n=p(this).val(),s=p(this).closest("tr").data("switch"),a=p(this).closest("tr").data("switch-type");"option"===a?(e=".d4p-switch-option-value-"+n,p(t=".d4p-switch-value-"+s).addClass("d4p-switch-option-is-hidden"),p(t+e).removeClass("d4p-switch-option-is-hidden")):"section"===a&&(e=".d4p-switch-section-value-"+n,p(t=".d4p-switch-section-"+s).addClass("d4p-switch-section-is-hidden"),p(t+e).removeClass("d4p-switch-section-is-hidden"))})}}}},s.wp.dev4press.dialogs={storage:{url:""},classes:function(t,e){var n="wp-dialog d4p-dialog d4p-dialog-modal";return""!==t&&(n+=" "+t),void 0!==e&&e&&(n+=" d4p-dialog-hidex"),n},default_button:function(t,e,n){return{id:"d4p-dialog-button-id-"+t,class:"d4p-dialog-button-"+t+(e?" button-has-focus":""),text:void 0!==n?n:d4plib_admin_data.ui.buttons[t],data:{icon:t}}},default_dialog:function(){return{width:480,height:"auto",minHeight:24,autoOpen:!1,resizable:!1,modal:!0,closeOnEscape:!1,zIndex:3e5,open:function(){p(".button-has-focus").focus()}}},icons:function(t,e){p(t).next().find(".ui-dialog-buttonset button").each(function(){if(0===p(this).find("span.ui-button-text").length&&p(this).html("<span class='ui-button-text'>"+p(this).html()+"</span>"),void 0===e){var t=p(this).data("icon");""!==t&&p(this).find("span.ui-button-text").prepend(d4plib_admin_data.ui.icons[t])}else p(this).find("span.ui-button-text").prepend(e)})}},s.wp.dev4press.ajaxtask={prefix:"",button:"",handler:"",nonce:"",progres:{active:!1,stop:!1,done:0,total:0},init:function(t,e,n,s){this.prefix=t,this.button=e,this.handler=n,this.nonce=s,p(i).on("click",this.button,function(t){wp.dev4press.ajaxtask.progres.active?wp.dev4press.ajaxtask.stop():wp.dev4press.ajaxtask.start()})},start:function(){this.progres.active=!0,p(this.button).val(d4plib_admin_data.ui.buttons.stop),p("#"+this.prefix+"-process").slideDown(),p("#"+this.prefix+"-progress pre").html(""),this._call({operation:"start"},this._callback.start)},stop:function(){this.progres.stop=!0,p(this.button).attr("disabled",!0)},run:function(){this._call({operation:"run"},this._callback.process)},_call:function(t,e){var n={url:ajaxurl+"?action="+this.handler+"&_ajax_nonce="+this.nonce,type:"post",dataType:"json",data:t,success:e};p.ajax(n)},_write:function(t){p("#"+this.prefix+"-progress pre").append(t+"\r\n")},_callback:{start:function(t){var e=wp.dev4press.ajaxtask.progres;e.current=0,e.total=t.total,wp.dev4press.ajaxtask._write(t.message),wp.dev4press.ajaxtask.run()},stop:function(t){wp.dev4press.ajaxtask.progres.active=!1,wp.dev4press.ajaxtask._write(t.message)},process:function(t){wp.dev4press.ajaxtask.progres.stop?wp.dev4press.ajaxtask._call({operation:"break"},wp.dev4press.ajaxtask._callback.stop):(wp.dev4press.ajaxtask.progres.done=t.done,wp.dev4press.ajaxtask._write(t.message),wp.dev4press.ajaxtask.progres.done<wp.dev4press.ajaxtask.progres.total?wp.dev4press.ajaxtask.run():(wp.dev4press.ajaxtask.stop(),wp.dev4press.ajaxtask._call({operation:"stop"},wp.dev4press.ajaxtask._callback.stop)))}}},wp.dev4press.admin.init()}(jQuery,window,document);