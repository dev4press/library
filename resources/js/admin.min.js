!function(r,a,e,t){a.wp=a.wp||{},a.wp.dev4press=a.wp.dev4press||{},a.wp.dev4press.admin={scroll_offset:40,active_element:null,init:function(){wp.dev4press.admin.components.scroller.run(),wp.dev4press.admin.components.interface.run(),wp.dev4press.admin.components.notices.run(),"settings"===d4plib_admin_data.page.panel&&wp.dev4press.admin.panels.settings.run(),r(a).bind("load resize orientationchange",function(){wp.dev4press.admin.components.scroller.resize()})},panels:{settings:{run:function(){wp.dev4press.admin.settings.init(),r("#"+d4plib_admin_data.plugin.prefix+"-form-settings").confirmsubmit(),1===r("#d4p-settings-mark").length&&wp.dev4press.admin.panels.settings.mark()},mark:function(){r(".d4p-panel-mark button").click(function(){r("#d4p-settings-mark").val("").trigger("input")});var t=r(".d4p-group"),n=r(".d4p-group > h3"),a=r(".d4p-settings-section > h4"),s=r(".d4p-settings-table > tbody > tr");r("#d4p-settings-mark").on("input",function(){var e=r(this).val();t.show(),n.unmark(),a.show().unmark(),s.show().unmark(),e&&(s.mark(e,{done:function(){s.not(":has(mark)").hide()}}),a.mark(e,{done:function(){a.each(function(e,t){0<r(t).find("mark").length?r(t).parent().find(".d4p-settings-table > tbody > tr").show():r(t).hide()})}}),n.mark(e,{done:function(){n.each(function(e,t){0<r(t).find("mark").length&&r(t).parent().find(".d4p-settings-table > tbody > tr").show()})}}),n.each(function(e,t){var n=r(t).parent(),a=0;r(".d4p-settings-section",n).each(function(e,t){0<r(t).height()&&(a+=r(t).height())}),0===a&&n.hide()}))})}}},components:{scroller:{run:function(){var e=r(".d4p-panel-scroller"),t=r(a);if(0<e.length){var n=e.offset();t.scroll(function(){t.scrollTop()>n.top&&e.hasClass("d4p-scroll-active")?e.stop().animate({marginTop:t.scrollTop()-n.top+wp.dev4press.admin.scroll_offset}):e.stop().animate({marginTop:0})})}},resize:function(){e.body.clientWidth<800?wp.dev4press.admin.scroll_offset=60:wp.dev4press.admin.scroll_offset=40,e.body.clientWidth<640?r(".d4p-panel-scroller").removeClass("d4p-scroll-active").stop().css("margin-top",0):r(".d4p-panel-scroller").addClass("d4p-scroll-active")}},interface:{run:function(){r(".d4p-nav-button > a").click(function(e){e.preventDefault(),r(this).next().slideToggle("fast")}),0<r(".d4p-wrap .d4p-message .notice").length&&setTimeout(function(){r(".d4p-wrap .d4p-message .notice").slideUp("slow")},1e4)}},notices:{run:function(){r("#wpbody-content > div.notice").detach().prependTo(".d4p-wrap")}}},settings:{init:function(){wp.dev4press.admin.settings.color_picker.run(),wp.dev4press.admin.settings.expandables.run(),wp.dev4press.admin.settings.toggles.run(),wp.dev4press.admin.settings.check_uncheck.run()},color_picker:{run:function(){0<r(".d4p-color-picker").length&&r(".d4p-color-picker").wpColorPicker()}},check_uncheck:{run:function(){r(".d4p-check-uncheck a").click(function(e){e.preventDefault();var t="checkall"===r(this).attr("href").substr(1);r(this).parent().parent().find("input[type=checkbox]").prop("checked",t)})}},toggles:{run:function(){r(e).on("click",".d4p-group h3 i.fa.fa-caret-down, .d4p-group h3 i.fa.fa-caret-up",function(){var e=r(this).hasClass("fa-caret-down"),t=r(this).parent().next();e?(r(this).removeClass("fa-caret-down").addClass("fa-caret-up"),t.slideDown(300)):(r(this).removeClass("fa-caret-up").addClass("fa-caret-down"),t.slideUp(300))}),r(e).on("click",".d4p-section-toggle .d4p-toggle-title",function(){var e=r(this).find("i.fa"),t=e.hasClass("fa-caret-down"),n=r(this).next();t?(e.removeClass("fa-caret-down").addClass("fa-caret-up"),n.slideDown(300)):(e.removeClass("fa-caret-up").addClass("fa-caret-down"),n.slideUp(300))})}},expandables:{run:function(){r(e).on("click",".d4p-setting-expandable_pairs .button-secondary",function(e){e.preventDefault();var t=r(this).parent();t.fadeOut(200,function(){t.remove()})}),r(e).on("click",".d4p-setting-expandable_text .button-secondary",function(e){wp.dev4press.admin.settings.expandables.remove(this,e),wp.dev4press.admin.settings.expandables.remove(this,e)}),r(e).on("click",".d4p-setting-expandable_raw .button-secondary",function(e){wp.dev4press.admin.settings.expandables.remove(this,e)}),r(".d4p-setting-expandable_pairs a.button-primary").click(function(e){e.preventDefault();var t=r(this).closest(".d4p-setting-expandable_pairs"),n=r(".d4p-next-id",t),a=n.val(),s=r(".pair-element-0",t).clone();r("input",s).each(function(){var e=r(this).attr("id").replace("_0_","_"+a+"_"),t=r(this).attr("name").replace("[0]","["+a+"]");r(this).attr("id",e).attr("name",t)}),s.attr("class","pair-element-"+a).fadeIn(),r(this).before(s),a++,n.val(a)}),r(".d4p-setting-expandable_text a.button-primary").click(function(e){wp.dev4press.admin.settings.expandables.add(this,e,".d4p-setting-expandable_text")}),r(".d4p-setting-expandable_raw a.button-primary").click(function(e){wp.dev4press.admin.settings.expandables.add(this,e,".d4p-setting-expandable_raw")})},add:function(e,t,n){t.preventDefault();var a=r(e).closest(n),s=r(".d4p-next-id",a),i=s.val(),p=r(".exp-text-element-0",a).clone();r("input",p).each(function(){var e=r(this).attr("id").replace("_0_","_"+i+"_"),t=r(this).attr("name").replace("[0]","["+i+"]");r(this).attr("id",e).attr("name",t)}),p.attr("class","exp-text-element exp-text-element-"+i).fadeIn(),r("ol",a).append(p),i++,s.val(i)},remove:function(e,t){t.preventDefault();var n=r(e).parent();n.fadeOut(200,function(){n.remove()})}}}},a.wp.dev4press.dialogs={storage:{url:""},classes:function(e,t){var n="wp-dialog d4p-dialog d4p-dialog-modal";return""!==e&&(n+=" "+e),void 0!==t&&t&&(n+=" d4p-dialog-hidex"),n},default_button:function(e,t,n){return{id:"d4p-dialog-button-id-"+e,class:"d4p-dialog-button-"+e+(t?" button-has-focus":""),text:void 0!==n?n:d4plib_admin_data.ui.buttons[e],data:{icon:e}}},default_dialog:function(){return{width:480,height:"auto",minHeight:24,autoOpen:!1,resizable:!1,modal:!0,closeOnEscape:!1,zIndex:3e5,open:function(){r(".button-has-focus").focus()}}},icons:function(e,t){r(e).next().find(".ui-dialog-buttonset button").each(function(){if(void 0===t){var e=r(this).data("icon");""!==e&&r(this).find("span.ui-button-text").prepend(d4plib_admin_data.ui.icons[e])}else r(this).find("span.ui-button-text").prepend(t)})}},a.wp.dev4press.ajaxtask={prefix:"",button:"",handler:"",nonce:"",progres:{active:!1,stop:!1,done:0,total:0},init:function(e,t,n,a){this.prefix=e,this.button=t,this.handler=n,this.nonce=a,r(this.button).click(function(e){wp.dev4press.ajaxtask.progres.active?wp.dev4press.ajaxtask.stop():wp.dev4press.ajaxtask.start()})},start:function(){this.progres.active=!0,r(this.button).val(d4plib_admin_data.ui.buttons.stop),r("#"+this.prefix+"-process").slideDown(),r("#"+this.prefix+"-progress pre").html(""),this._call({operation:"start"},this._callback.start)},stop:function(){this.progres.stop=!0,r(this.button).attr("disabled",!0)},run:function(){this._call({operation:"run"},this._callback.process)},_call:function(e,t){var n={url:ajaxurl+"?action="+this.handler+"&_ajax_nonce="+this.nonce,type:"post",dataType:"json",data:e,success:t};r.ajax(n)},_write:function(e){r("#"+this.prefix+"-progress pre").append(e+"\r\n")},_callback:{start:function(e){var t=wp.dev4press.ajaxtask.progres;t.current=0,t.total=e.total,wp.dev4press.ajaxtask._write(e.message),wp.dev4press.ajaxtask.run()},stop:function(e){wp.dev4press.ajaxtask.progres.active=!1,wp.dev4press.ajaxtask._write(e.message)},process:function(e){wp.dev4press.ajaxtask.progres.stop?wp.dev4press.ajaxtask._call({operation:"break"},wp.dev4press.ajaxtask._callback.stop):(wp.dev4press.ajaxtask.progres.done=e.done,wp.dev4press.ajaxtask._write(e.message),wp.dev4press.ajaxtask.progres.done<wp.dev4press.ajaxtask.progres.total?wp.dev4press.ajaxtask.run():(wp.dev4press.ajaxtask.stop(),wp.dev4press.ajaxtask._call({operation:"stop"},wp.dev4press.ajaxtask._callback.stop)))}}},wp.dev4press.admin.init()}(jQuery,window,document);