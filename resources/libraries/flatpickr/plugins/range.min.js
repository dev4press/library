!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).rangePlugin=t()}(this,function(){"use strict";function d(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var u=arguments[t],a=0,l=u.length;a<l;a++,i++)o[i]=u[a];return o}return function(t){return void 0===t&&(t={}),function(a){var l,r,s,c="",e={onParseConfig:function(){a.config.mode="range",c=a.config.altInput?a.config.altFormat:a.config.dateFormat},onReady:function(){!function(){if(t.input){if(!(l=t.input instanceof Element?t.input:window.document.querySelector(t.input)))return a.config.errorHandler(new Error("Invalid input element specified"));a.config.wrap&&(l=l.querySelector("[data-input]"))}else(l=a._input.cloneNode()).removeAttribute("id"),l._flatpickr=void 0;if(l.value){var e=a.parseDate(l.value);e&&a.selectedDates.push(e)}l.setAttribute("data-fp-omit",""),a.config.clickOpens&&(a._bind(l,["focus","click"],function(){a.selectedDates[1]&&(a.latestSelectedDateObj=a.selectedDates[1],a._setHoursFromDate(a.selectedDates[1]),a.jumpToDate(a.selectedDates[1])),r=!0,a.isOpen=!1,a.open(void 0,"left"===t.position?a._input:l)}),a._bind(a._input,["focus","click"],function(e){e.preventDefault(),a.isOpen=!1,a.open()})),a.config.allowInput&&a._bind(l,"keydown",function(e){"Enter"===e.key&&(a.setDate([a.selectedDates[0],l.value],!0,c),l.click())}),t.input||a._input.parentNode&&a._input.parentNode.insertBefore(l,a._input.nextSibling)}(),a.config.ignoredFocusElements.push(l),a.config.allowInput?(a._input.removeAttribute("readonly"),l.removeAttribute("readonly")):l.setAttribute("readonly","readonly"),a._bind(a._input,"focus",function(){a.latestSelectedDateObj=a.selectedDates[0],a._setHoursFromDate(a.selectedDates[0]),r=!1,a.jumpToDate(a.selectedDates[0])}),a.config.allowInput&&a._bind(a._input,"keydown",function(e){"Enter"===e.key&&a.setDate([a._input.value,a.selectedDates[1]],!0,c)}),a.setDate(a.selectedDates,!1),e.onValueUpdate(a.selectedDates),a.loadedPlugins.push("range")},onPreCalendarPosition:function(){r&&(a._positionElement=l,setTimeout(function(){a._positionElement=a._input},0))},onChange:function(){a.selectedDates.length||setTimeout(function(){a.selectedDates.length||(l.value="",s=[])},10),r&&setTimeout(function(){l.focus()},0)},onDestroy:function(){t.input||l.parentNode&&l.parentNode.removeChild(l)},onValueUpdate:function(e){var t,n,o;if(l){if((s=!s||e.length>=s.length?d(e):s).length>e.length){var i=e[0],u=r?[s[0],i]:[i,s[1]];a.setDate(u,!1),s=d(u)}n=(t=a.selectedDates.map(function(e){return a.formatDate(e,c)}))[0],a._input.value=void 0===n?"":n,o=t[1],l.value=void 0===o?"":o}}};return e}}});